CREATE TABLE Sede
(ID VARCHAR (11),
CAP CHAR (5) not null,
via VARCHAR (25) not null,
n_civico SMALLINT not null,
telefono VARCHAR (13) not null,
UNIQUE (telefono),
PRIMARY KEY (ID)
);

CREATE TABLE Personale
(CF VARCHAR (16),
nome VARCHAR (20),
cognome VARCHAR (30),
datadinascita DATE,
sesso ENUM ('M','F'),
telefono VARCHAR (13),
tipo VARCHAR (30),
grado VARCHAR (30),
CAP CHAR (5),
via VARCHAR (25),
n_civico SMALLINT,
IBAN VARCHAR (27) not null,
stipendio VARCHAR (15),
sede VARCHAR (11),
PRIMARY KEY (CF),
FOREIGN KEY (sede) REFERENCES Sede (ID),
FOREIGN KEY (stipendio) REFERENCES Stipendio (tipo),
);

CREATE TABLE Stipendio
(tipo VARCHAR (15),
imp_lordo DECIMAL,
imp_netto DECIMAL,
PRIMARY KEY (tipo)
);

CREATE TABLE PrenotazioneStanza (
    id INT(11),
    data_inizio DATETIME NOT NULL,
    data_fine DATETIME NOT NULL,
    data_p data_fine DATETIME NOT NULL,
    pagamento BOOLEAN,
    paziente VARCHAR(16),
    stanza TINYINT,
    reparto CHAR(4),
    sede VARCHAR(2),
    PRIMARY KEY(id),
    FOREIGN KEY (stanza) REFERENCES StanzaSP(n_stanza),
    FOREIGN KEY (reparto) REFERENCES StanzaSP(repartp),
    FOREIGN KEY (sede) REFERENCES StanzaSP(sede),
    FOREIGN KEY (paziente) REFERENCES Paziente(CF)
)ENGINE=InnoDb;

CREATE TABLE PrenotazioneEsame (
    id INT(11),
    data_p data_fine DATETIME NOT NULL,
    orario TIME NOT NULL,    
    pagamento BOOLEAN,
    paziente VARCHAR(16),
    stanza TINYINT,
    reparto CHAR(4),
    sede VARCHAR(2),
    PRIMARY KEY(id),
    FOREIGN KEY (stanza) REFERENCES StanzaSP(n_stanza),
    FOREIGN KEY (reparto) REFERENCES StanzaSP(reparto),
    FOREIGN KEY (sede) REFERENCES StanzaSP(sede),
    FOREIGN KEY (paziente) REFERENCES Paziente(CF)
)ENGINE=InnoDb;

CREATE TABLE EsameEffettuato (
    id INT(11),
    paziente VARCHAR(16),
    tipo_esame VARCHAR(10),
    stanza TINYINT NOT NULL,
    terapia VARCHAR(100) NOT NULL, 
    diagnosi VARCHAR(100) NOT NULL,
    medico VARCHAR(20) NOT NULL,
    FOREIGN KEY(tipo_esame) REFERENCES TipoEsame(nome),
    FOREIGN KEY (paziente) REFERENCES Paziente(CF),
    PRIMARY KEY(id)
)ENGINE=InnoDb;
CREATE TABLE TipoEsame (
    nome VARCHAR(10),
    prezzo DECIMAL NOT NULL
) ENGINE=InnoDb;